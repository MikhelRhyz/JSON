<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript JSON Exercises</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            padding-top: 20px;
        }
        .exercise-card {
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        .exercise-header {
            background-color: #0d6efd;
            color: white;
            padding: 15px 20px;
            border-bottom: 1px solid #dee2e6;
        }
        .exercise-body {
            padding: 20px;
            background-color: white;
        }
        .code-block {
            background-color: #f8f9fa;
            border-left: 4px solid #0d6efd;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
        }
        .btn-check {
            background-color: #198754;
            color: white;
        }
        .btn-check:hover {
            background-color: #157347;
        }
        .result-area {
            min-height: 100px;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 10px;
            margin-top: 15px;
            background-color: #f8f9fa;
        }
        .hint {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 0 5px 5px 0;
        }
        .solution-area {
            display: none;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center mb-4">JavaScript JSON Exercises</h1>
        <p class="lead text-center mb-5">Practice your JSON skills with these interactive exercises. Write JavaScript code to solve each challenge.</p>
        
        <!-- Exercise 1: JSON Syntax -->
        <div class="exercise-card">
            <div class="exercise-header">
                <h3>Exercise 1: JSON Syntax</h3>
            </div>
            <div class="exercise-body">
                <p>Create a valid JSON string representing a person with the following properties:</p>
                <ul>
                    <li>name: "John Doe"</li>
                    <li>age: 30</li>
                    <li>isStudent: false</li>
                    <li>hobbies: ["reading", "swimming", "coding"]</li>
                </ul>
                <div class="mb-3">
                    <label for="jsonSyntax" class="form-label">Your JSON:</label>
                    <textarea class="form-control" id="jsonSyntax" rows="4" placeholder='Enter your JSON string here...'></textarea>
                </div>
                <button class="btn btn-check" onclick="checkJsonSyntax()">Validate JSON</button>
                <div class="result-area" id="result1"></div>
                <div class="hint">
                    <strong>Hint:</strong> Remember that JSON requires double quotes for both keys and string values.
                </div>
            </div>
        </div>

        <!-- Exercise 2: JSON Parse -->
        <div class="exercise-card">
            <div class="exercise-header">
                <h3>Exercise 2: JSON Parse</h3>
            </div>
            <div class="exercise-body">
                <p>Parse the following JSON string and extract the "email" property value:</p>
                <div class="code-block">let jsonString = '{"name": "Alice", "age": 25, "email": "alice@example.com", "active": true}';</div>
                <div class="mb-3">
                    <label for="jsonParse" class="form-label">Your Code:</label>
                    <textarea class="form-control" id="jsonParse" rows="4" placeholder='Write your JavaScript code here...'></textarea>
                </div>
                <button class="btn btn-check" onclick="checkJsonParse()">Run Code</button>
                <div class="result-area" id="result2"></div>
                <div class="hint">
                    <strong>Hint:</strong> Use JSON.parse() to convert the string to a JavaScript object.
                </div>
            </div>
        </div>

        <!-- Exercise 3: JSON Stringify -->
        <div class="exercise-card">
            <div class="exercise-header">
                <h3>Exercise 3: JSON Stringify</h3>
            </div>
            <div class="exercise-body">
                <p>Convert the following JavaScript object to a JSON string:</p>
                <div class="code-block">let person = {
  firstName: "Bob",
  lastName: "Smith",
  age: 35,
  address: {
    street: "123 Main St",
    city: "Anytown",
    country: "USA"
  }
};</div>
                <div class="mb-3">
                    <label for="jsonStringify" class="form-label">Your Code:</label>
                    <textarea class="form-control" id="jsonStringify" rows="4" placeholder='Write your JavaScript code here...'></textarea>
                </div>
                <button class="btn btn-check" onclick="checkJsonStringify()">Run Code</button>
                <div class="result-area" id="result3"></div>
                <div class="hint">
                    <strong>Hint:</strong> Use JSON.stringify() to convert the object to a JSON string.
                </div>
            </div>
        </div>

        <!-- Exercise 4: JSON Objects -->
        <div class="exercise-card">
            <div class="exercise-header">
                <h3>Exercise 4: JSON Objects</h3>
            </div>
            <div class="exercise-body">
                <p>Access the nested property "model" from the following JSON object:</p>
                <div class="code-block">let car = {
  make: "Toyota",
  year: 2020,
  specs: {
    model: "Camry",
    engine: "2.5L",
    transmission: "Automatic"
  }
};</div>
                <div class="mb-3">
                    <label for="jsonObjects" class="form-label">Your Code:</label>
                    <textarea class="form-control" id="jsonObjects" rows="4" placeholder='Write your JavaScript code here...'></textarea>
                </div>
                <button class="btn btn-check" onclick="checkJsonObjects()">Run Code</button>
                <div class="result-area" id="result4"></div>
                <div class="hint">
                    <strong>Hint:</strong> Use dot notation or bracket notation to access nested properties.
                </div>
            </div>
        </div>

        <!-- Exercise 5: JSON Arrays -->
        <div class="exercise-card">
            <div class="exercise-header">
                <h3>Exercise 5: JSON Arrays</h3>
            </div>
            <div class="exercise-body">
                <p>Loop through the following array of JSON objects and extract all the "name" values:</p>
                <div class="code-block">let users = [
  {id: 1, name: "John", role: "admin"},
  {id: 2, name: "Jane", role: "user"},
  {id: 3, name: "Doe", role: "user"}
];</div>
                <div class="mb-3">
                    <label for="jsonArrays" class="form-label">Your Code:</label>
                    <textarea class="form-control" id="jsonArrays" rows="4" placeholder='Write your JavaScript code here...'></textarea>
                </div>
                <button class="btn btn-check" onclick="checkJsonArrays()">Run Code</button>
                <div class="result-area" id="result5"></div>
                <div class="hint">
                    <strong>Hint:</strong> You can use a for loop, forEach, or map to iterate through the array.
                </div>
            </div>
        </div>

        <!-- Exercise 6: JSON Data Types -->
        <div class="exercise-card">
            <div class="exercise-header">
                <h3>Exercise 6: JSON Data Types</h3>
            </div>
            <div class="exercise-body">
                <p>Create a JSON object that includes examples of all JSON data types:</p>
                <ul>
                    <li>String</li>
                    <li>Number</li>
                    <li>Boolean</li>
                    <li>Array</li>
                    <li>Object</li>
                    <li>null</li>
                </ul>
                <div class="mb-3">
                    <label for="jsonDataTypes" class="form-label">Your JSON:</label>
                    <textarea class="form-control" id="jsonDataTypes" rows="4" placeholder='Enter your JSON object here...'></textarea>
                </div>
                <button class="btn btn-check" onclick="checkJsonDataTypes()">Validate JSON</button>
                <div class="result-area" id="result6"></div>
                <div class="hint">
                    <strong>Hint:</strong> Remember that JSON doesn't support undefined, functions, or Date objects.
                </div>
            </div>
        </div>

        <!-- Exercise 7: JSON Server Simulation -->
        <div class="exercise-card">
            <div class="exercise-header">
                <h3>Exercise 7: JSON Server Simulation</h3>
            </div>
            <div class="exercise-body">
                <p>Simulate fetching data from a server (using a setTimeout to mimic network delay) and display the user's name:</p>
                <div class="code-block">// Simulated server response
function fetchUserData() {
  return new Promise(resolve => {
    setTimeout(() => {
      resolve('{"id": 101, "name": "Emma", "email": "emma@example.com"}');
    }, 1000);
  });
}</div>
                <div class="mb-3">
                    <label for="jsonServer" class="form-label">Your Code:</label>
                    <textarea class="form-control" id="jsonServer" rows="4" placeholder='Write your JavaScript code here...'></textarea>
                </div>
                <button class="btn btn-check" onclick="checkJsonServer()">Run Code</button>
                <div class="result-area" id="result7"></div>
                <div class="hint">
                    <strong>Hint:</strong> Use async/await or .then() to handle the Promise, then parse the JSON and extract the name.
                </div>
            </div>
        </div>

        <div class="text-center mt-5">
            <button class="btn btn-outline-primary" onclick="showAllSolutions()">Show All Solutions</button>
        </div>

        <!-- Solutions Area -->
        <div class="solution-area" id="solutions">
            <h3 class="mt-5 mb-3">Solutions</h3>
            
            <div class="mb-4">
                <h5>Exercise 1: JSON Syntax</h5>
                <div class="code-block">{
  "name": "John Doe",
  "age": 30,
  "isStudent": false,
  "hobbies": ["reading", "swimming", "coding"]
}</div>
            </div>
            
            <div class="mb-4">
                <h5>Exercise 2: JSON Parse</h5>
                <div class="code-block">let jsonString = '{"name": "Alice", "age": 25, "email": "alice@example.com", "active": true}';
let obj = JSON.parse(jsonString);
console.log(obj.email); // Output: alice@example.com</div>
            </div>
            
            <div class="mb-4">
                <h5>Exercise 3: JSON Stringify</h5>
                <div class="code-block">let person = {
  firstName: "Bob",
  lastName: "Smith",
  age: 35,
  address: {
    street: "123 Main St",
    city: "Anytown",
    country: "USA"
  }
};
let jsonString = JSON.stringify(person);
console.log(jsonString);</div>
            </div>
            
            <div class="mb-4">
                <h5>Exercise 4: JSON Objects</h5>
                <div class="code-block">let car = {
  make: "Toyota",
  year: 2020,
  specs: {
    model: "Camry",
    engine: "2.5L",
    transmission: "Automatic"
  }
};
console.log(car.specs.model); // Output: Camry</div>
            </div>
            
            <div class="mb-4">
                <h5>Exercise 5: JSON Arrays</h5>
                <div class="code-block">let users = [
  {id: 1, name: "John", role: "admin"},
  {id: 2, name: "Jane", role: "user"},
  {id: 3, name: "Doe", role: "user"}
];

// Using for loop
for (let i = 0; i < users.length; i++) {
  console.log(users[i].name);
}

// Using forEach
users.forEach(user => {
  console.log(user.name);
});

// Using map
let names = users.map(user => user.name);
console.log(names);</div>
            </div>
            
            <div class="mb-4">
                <h5>Exercise 6: JSON Data Types</h5>
                <div class="code-block">{
  "string": "Hello World",
  "number": 42,
  "boolean": true,
  "array": [1, 2, 3],
  "object": {"key": "value"},
  "nullValue": null
}</div>
            </div>
            
            <div class="mb-4">
                <h5>Exercise 7: JSON Server Simulation</h5>
                <div class="code-block">// Using async/await
async function displayUserName() {
  let jsonString = await fetchUserData();
  let user = JSON.parse(jsonString);
  console.log(user.name); // Output: Emma
}

// Using .then()
fetchUserData().then(jsonString => {
  let user = JSON.parse(jsonString);
  console.log(user.name); // Output: Emma
});</div>
            </div>
        </div>
    </div>

    <script>
        // Exercise 1: JSON Syntax
        function checkJsonSyntax() {
            const jsonInput = document.getElementById('jsonSyntax').value.trim();
            const resultArea = document.getElementById('result1');
            
            try {
                const obj = JSON.parse(jsonInput);
                
                // Check if all required properties exist
                if (obj.name === "John Doe" && obj.age === 30 && 
                    obj.isStudent === false && 
                    Array.isArray(obj.hobbies) && 
                    obj.hobbies.includes("reading") && 
                    obj.hobbies.includes("swimming") && 
                    obj.hobbies.includes("coding")) {
                    resultArea.innerHTML = '<div class="alert alert-success">✓ Correct! Your JSON is valid and contains all required properties.</div>';
                } else {
                    resultArea.innerHTML = '<div class="alert alert-warning">⚠ Your JSON is valid but missing some required properties.</div>';
                }
            } catch (e) {
                resultArea.innerHTML = '<div class="alert alert-danger">✗ Invalid JSON: ' + e.message + '</div>';
            }
        }

        // Exercise 2: JSON Parse
        function checkJsonParse() {
            const codeInput = document.getElementById('jsonParse').value.trim();
            const resultArea = document.getElementById('result2');
            
            try {
                // Create a safe environment to run the code
                const jsonString = '{"name": "Alice", "age": 25, "email": "alice@example.com", "active": true}';
                
                // Wrap the code in a function to capture console.log output
                const wrappedCode = `
                    (function() {
                        let jsonString = '${jsonString}';
                        ${codeInput}
                    })();
                `;
                
                // Capture console.log output
                const originalLog = console.log;
                let output = '';
                console.log = function(message) {
                    output += message + '\\n';
                };
                
                // Execute the code
                eval(wrappedCode);
                
                // Restore original console.log
                console.log = originalLog;
                
                // Check if the output contains the expected email
                if (output.includes('alice@example.com')) {
                    resultArea.innerHTML = '<div class="alert alert-success">✓ Correct! You successfully extracted the email.</div>';
                } else {
                    resultArea.innerHTML = '<div class="alert alert-warning">⚠ Your code ran but did not output the expected email.</div>';
                }
            } catch (e) {
                resultArea.innerHTML = '<div class="alert alert-danger">✗ Error in your code: ' + e.message + '</div>';
            }
        }

        // Exercise 3: JSON Stringify
        function checkJsonStringify() {
            const codeInput = document.getElementById('jsonStringify').value.trim();
            const resultArea = document.getElementById('result3');
            
            try {
                // Create the person object for the exercise
                const person = {
                    firstName: "Bob",
                    lastName: "Smith",
                    age: 35,
                    address: {
                        street: "123 Main St",
                        city: "Anytown",
                        country: "USA"
                    }
                };
                
                // Wrap the code in a function to capture console.log output
                const wrappedCode = `
                    (function() {
                        let person = ${JSON.stringify(person)};
                        ${codeInput}
                    })();
                `;
                
                // Capture console.log output
                const originalLog = console.log;
                let output = '';
                console.log = function(message) {
                    output += message + '\\n';
                };
                
                // Execute the code
                eval(wrappedCode);
                
                // Restore original console.log
                console.log = originalLog;
                
                // Check if the output is a valid JSON string representing the person object
                if (output.trim()) {
                    try {
                        const parsed = JSON.parse(output.trim());
                        if (parsed.firstName === "Bob" && parsed.lastName === "Smith") {
                            resultArea.innerHTML = '<div class="alert alert-success">✓ Correct! You successfully converted the object to JSON.</div>';
                        } else {
                            resultArea.innerHTML = '<div class="alert alert-warning">⚠ Your code produced JSON but it doesn\'t match the expected structure.</div>';
                        }
                    } catch (e) {
                        resultArea.innerHTML = '<div class="alert alert-warning">⚠ Your code output something but it\'s not valid JSON.</div>';
                    }
                } else {
                    resultArea.innerHTML = '<div class="alert alert-warning">⚠ Your code ran but produced no output.</div>';
                }
            } catch (e) {
                resultArea.innerHTML = '<div class="alert alert-danger">✗ Error in your code: ' + e.message + '</div>';
            }
        }

        // Exercise 4: JSON Objects
        function checkJsonObjects() {
            const codeInput = document.getElementById('jsonObjects').value.trim();
            const resultArea = document.getElementById('result4');
            
            try {
                // Create the car object for the exercise
                const car = {
                    make: "Toyota",
                    year: 2020,
                    specs: {
                        model: "Camry",
                        engine: "2.5L",
                        transmission: "Automatic"
                    }
                };
                
                // Wrap the code in a function to capture console.log output
                const wrappedCode = `
                    (function() {
                        let car = ${JSON.stringify(car)};
                        ${codeInput}
                    })();
                `;
                
                // Capture console.log output
                const originalLog = console.log;
                let output = '';
                console.log = function(message) {
                    output += message + '\\n';
                };
                
                // Execute the code
                eval(wrappedCode);
                
                // Restore original console.log
                console.log = originalLog;
                
                // Check if the output contains "Camry"
                if (output.includes('Camry')) {
                    resultArea.innerHTML = '<div class="alert alert-success">✓ Correct! You successfully accessed the model property.</div>';
                } else {
                    resultArea.innerHTML = '<div class="alert alert-warning">⚠ Your code ran but did not output the expected model.</div>';
                }
            } catch (e) {
                resultArea.innerHTML = '<div class="alert alert-danger">✗ Error in your code: ' + e.message + '</div>';
            }
        }

        // Exercise 5: JSON Arrays
        function checkJsonArrays() {
            const codeInput = document.getElementById('jsonArrays').value.trim();
            const resultArea = document.getElementById('result5');
            
            try {
                // Create the users array for the exercise
                const users = [
                    {id: 1, name: "John", role: "admin"},
                    {id: 2, name: "Jane", role: "user"},
                    {id: 3, name: "Doe", role: "user"}
                ];
                
                // Wrap the code in a function to capture console.log output
                const wrappedCode = `
                    (function() {
                        let users = ${JSON.stringify(users)};
                        ${codeInput}
                    })();
                `;
                
                // Capture console.log output
                const originalLog = console.log;
                let output = '';
                console.log = function(message) {
                    output += message + '\\n';
                };
                
                // Execute the code
                eval(wrappedCode);
                
                // Restore original console.log
                console.log = originalLog;
                
                // Check if the output contains all three names
                if (output.includes('John') && output.includes('Jane') && output.includes('Doe')) {
                    resultArea.innerHTML = '<div class="alert alert-success">✓ Correct! You successfully extracted all names.</div>';
                } else {
                    resultArea.innerHTML = '<div class="alert alert-warning">⚠ Your code ran but did not output all expected names.</div>';
                }
            } catch (e) {
                resultArea.innerHTML = '<div class="alert alert-danger">✗ Error in your code: ' + e.message + '</div>';
            }
        }

        // Exercise 6: JSON Data Types
        function checkJsonDataTypes() {
            const jsonInput = document.getElementById('jsonDataTypes').value.trim();
            const resultArea = document.getElementById('result6');
            
            try {
                const obj = JSON.parse(jsonInput);
                
                // Check if all data types are present
                const hasString = typeof obj.string === 'string';
                const hasNumber = typeof obj.number === 'number';
                const hasBoolean = typeof obj.boolean === 'boolean';
                const hasArray = Array.isArray(obj.array);
                const hasObject = typeof obj.object === 'object' && obj.object !== null && !Array.isArray(obj.object);
                const hasNull = obj.nullValue === null;
                
                if (hasString && hasNumber && hasBoolean && hasArray && hasObject && hasNull) {
                    resultArea.innerHTML = '<div class="alert alert-success">✓ Correct! Your JSON includes all required data types.</div>';
                } else {
                    let missing = [];
                    if (!hasString) missing.push('string');
                    if (!hasNumber) missing.push('number');
                    if (!hasBoolean) missing.push('boolean');
                    if (!hasArray) missing.push('array');
                    if (!hasObject) missing.push('object');
                    if (!hasNull) missing.push('null');
                    
                    resultArea.innerHTML = '<div class="alert alert-warning">⚠ Your JSON is valid but missing: ' + missing.join(', ') + '</div>';
                }
            } catch (e) {
                resultArea.innerHTML = '<div class="alert alert-danger">✗ Invalid JSON: ' + e.message + '</div>';
            }
        }

        // Exercise 7: JSON Server Simulation
        function checkJsonServer() {
            const codeInput = document.getElementById('jsonServer').value.trim();
            const resultArea = document.getElementById('result7');
            
            try {
                // Create the fetchUserData function for the exercise
                const fetchUserData = `
                    function fetchUserData() {
                        return new Promise(resolve => {
                            setTimeout(() => {
                                resolve('{"id": 101, "name": "Emma", "email": "emma@example.com"}');
                            }, 100);
                        });
                    }
                `;
                
                // Wrap the code in a function to capture console.log output
                const wrappedCode = `
                    (async function() {
                        ${fetchUserData}
                        ${codeInput}
                    })();
                `;
                
                // Capture console.log output
                const originalLog = console.log;
                let output = '';
                console.log = function(message) {
                    output += message + '\\n';
                };
                
                // Execute the code with a timeout to handle async operations
                eval(wrappedCode);
                
                // Wait a bit for the async code to complete
                setTimeout(() => {
                    // Restore original console.log
                    console.log = originalLog;
                    
                    // Check if the output contains "Emma"
                    if (output.includes('Emma')) {
                        resultArea.innerHTML = '<div class="alert alert-success">✓ Correct! You successfully handled the async operation and extracted the name.</div>';
                    } else {
                        resultArea.innerHTML = '<div class="alert alert-warning">⚠ Your code ran but did not output the expected name.</div>';
                    }
                }, 200);
            } catch (e) {
                resultArea.innerHTML = '<div class="alert alert-danger">✗ Error in your code: ' + e.message + '</div>';
            }
        }

        // Show all solutions
        function showAllSolutions() {
            document.getElementById('solutions').style.display = 'block';
        }
    </script>
</body>
</html>